
Please wait for several minutes for Harbor deployment to complete.
Then follow the steps below to use Harbor.

{{ if not .Values.insecureRegistry -}}
1. Add the Harbor CA certificate to Docker by executing the following command:

  sudo mkdir -p /etc/docker/certs.d/{{ .Values.externalDomain }}
  kubectl get secret \
    --namespace {{ .Release.Namespace }} {{ template "harbor.fullname" . }}-ingress \
    -o jsonpath="{.data.ca\.crt}" | base64 --decode | \
    sudo tee /etc/docker/certs.d/{{ .Values.externalDomain }}/ca.crt

{{ else -}}
1. Add Harbor FQDN as insecure registry in your docker config file and restart docker daemon.

{{ end -}}

2. Get Harbor admin password by executing the following command:

  kubectl get secret --namespace {{ .Release.Namespace }} {{ template "harbor.fullname" . }}-adminserver -o jsonpath="{.data.HARBOR_ADMIN_PASSWORD}" | base64 --decode; echo

3. Add Harbor FQDN {{ .Values.externalDomain }} to K8s Ingress Controller IP resolution on DNS Server or in file /etc/hosts.

4. Access Harbor UI via {{ template "harbor.externalURL" . }}

5. Login Harbor with Docker CLI:

  docker login {{ .Values.externalDomain }}
